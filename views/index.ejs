
<%
const formatter = new Intl.NumberFormat('en-IN', {
  style:'percent',
  
  minimumFractionDigits: 2,
})%>


<div class="section white ">
  <h2  class="header center light-blue-text text-darken-4" style="font-family:Roboto;">Select a Subject</h2>
  <hr width="70%">
  <div class="container">
    <div class="row">
      <% subject.filter((element => element.isActive == true)).forEach(element => { %>
        <%fintage = element.nosion/(element.nopic*5)
        if(isNaN(fintage)){ 
          fintage = 0
        }
        textColor = "white-text"
        if(fintage < 0.5)
        {
          backColor = "red"
        }
        else if(fintage >= 0.5 && fintage < 1)
        {
          backColor = "yellow"
        }
        else
        {
          backColor = "green"
        }
        %>
      <div class="col s4">
        <div class="z-depth-4 card">
          <div class="card-panel waves-block waves-light <%=backColor%> darken-1">
            <a href="/subject/<%=element._id%>">
              <p class="card-title <%=textColor%> center"> <%=element.name%><br>Finished: <%=formatter.format(fintage)%></p>
            </a>
          </div>
        </div>
      </div>
      <%});%>
      <div class="col s4">
        <div class="z-depth-4 card">
          <div class="card-panel waves-block waves-light white">
            <a data-toggle="modal" class="modal-trigger" href="#addsubject">
              <p class="card-title blue-text text-darken-4 center" style="font-size: 34px;">+Subject</p>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div id = "addsubject" class="modal white">
    <h5 class="header center light-blue-text text-darken-4" style="font-family:Handlee;">Add a Subject</h5>
    <a class="modal-close waves-effect waves-grey btn-flat right" style="top: -45px;"><i class="material-icons">close</i></a>
    <div class="row">
      <form action="/subject" method="POST">
        <div class="input-field col s6 offset-s3 center dark-blue-text" style="width: 50%; ">
          <input name = "name" type="text" placeholder = "Subject Name" class="validate" required="" aria-required="true" value = "<%=newSubject.name%>">
        </div>
        <div class="input-field col s6 offset-s3 left center" style="width: 50%;">
          <input class="btn light-blue darken-4 white-text" value="ADD" type="submit">
        </div>
        </form>
      
    </div>
  </div>